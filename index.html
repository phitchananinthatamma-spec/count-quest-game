<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>COUNT QUEST ‚Äì ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ô‡∏±‡∏Å‡∏ô‡∏±‡∏ö</title>
  <style>
    body{
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      background: linear-gradient(135deg,#0f172a,#1e293b);
      color:#e2e8f0;
      margin:0;
      padding:0;
    }
    .wrap{
      max-width: 900px;
      margin: 0 auto;
      padding: 18px;
    }
    .card{
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 16px;
      padding: 16px;
      margin: 12px 0;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }
    h1{
      margin: 8px 0 0;
      font-size: 26px;
    }
    .sub{
      opacity:0.9;
      margin-top: 6px;
      line-height: 1.4;
    }
    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }
    .pill{
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 999px;
      padding: 8px 12px;
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-size: 14px;
    }
    .btn{
      border:none;
      cursor:pointer;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 700;
      background:#38bdf8;
      color:#0b1220;
      transition: transform .06s ease;
    }
    .btn:active{ transform: scale(0.98); }
    .btn.secondary{
      background: rgba(255,255,255,0.12);
      color:#e2e8f0;
      border:1px solid rgba(255,255,255,0.18);
    }
    .question{
      font-size: 18px;
      line-height: 1.5;
      margin: 10px 0 12px;
    }
    .choices{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    @media(min-width:700px){
      .choices{ grid-template-columns: 1fr 1fr; }
    }
    .choice{
      text-align:left;
      background: rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.14);
      border-radius: 14px;
      padding: 12px;
      cursor:pointer;
      font-weight: 650;
      color:#e2e8f0;
    }
    .choice:hover{
      border-color: rgba(56,189,248,0.8);
      box-shadow: 0 0 0 2px rgba(56,189,248,0.15);
    }
    .choice.correct{
      border-color: rgba(34,197,94,0.9);
      box-shadow: 0 0 0 2px rgba(34,197,94,0.15);
    }
    .choice.wrong{
      border-color: rgba(239,68,68,0.9);
      box-shadow: 0 0 0 2px rgba(239,68,68,0.15);
    }
    .log{
      font-size: 14px;
      opacity:0.95;
      line-height:1.45;
    }
    .small{
      font-size: 13px;
      opacity:0.85;
    }
    input{
      width:100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,23,42,0.55);
      color:#e2e8f0;
      outline:none;
    }
    .badge{
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 12px;
      background: rgba(56,189,248,0.18);
      border:1px solid rgba(56,189,248,0.25);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="row" style="justify-content:space-between; align-items:center;">
        <div>
          <h1>COUNT QUEST ‚Äì ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ô‡∏±‡∏Å‡∏ô‡∏±‡∏ö</h1>
          <div class="sub">‡∏°‡∏¥‡∏ô‡∏¥‡πÄ‡∏Å‡∏° ‚Äú‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‚Äù ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥ ‚ú® ‡∏ï‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÄ‡∏≠‡∏≤‡∏ä‡∏ô‡∏∞‡∏ö‡∏≠‡∏™!</div>
        </div>
        <div class="pill"><span class="badge">Unique Mode</span> üé≤ ‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå</div>
      </div>

      <div class="row" style="margin-top:12px;">
        <div class="pill">‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤: <b id="time">60</b> ‡∏ß‡∏¥</div>
        <div class="pill">‚ù§Ô∏è ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï: <b id="life">3</b></div>
        <div class="pill">‚≠ê ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <b id="score">0</b></div>
        <div class="pill">üìà ‡πÄ‡∏•‡πÄ‡∏ß‡∏•: <b id="level">1</b></div>
      </div>

      <div style="margin-top:12px;" class="row">
        <button class="btn" id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
        <button class="btn secondary" id="resetBtn">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
      </div>
    </div>

    <div class="card" id="gameCard" style="display:none;">
      <div class="row" style="justify-content:space-between; align-items:center;">
        <div class="pill">üß© ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà <b id="qNo">1</b> / <b id="qMax">10</b></div>
        <div class="pill">üéØ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: <b id="qType">-</b></div>
      </div>

      <div class="question" id="questionText">...</div>
      <div class="choices" id="choices"></div>

      <div style="margin-top:12px;" class="log" id="feedback"></div>
      <div class="small" id="hint"></div>
    </div>

    <div class="card" id="endCard" style="display:none;">
      <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à üéâ</h2>
      <div class="sub" id="summary"></div>
      <div style="margin-top:12px;" class="row">
        <button class="btn" id="playAgainBtn">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        <button class="btn secondary" id="shareBtn">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ä‡∏£‡πå</button>
      </div>
      <div class="small" style="margin-top:10px;">
        *‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏≤‡πÄ‡∏Å‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡∏™‡πà‡∏á ‚Äú‡∏•‡∏¥‡πâ‡∏á‡∏Å‡πå‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‚Äù ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
      </div>
    </div>

    <div class="card">
      <h3>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô (‡∏™‡∏±‡πâ‡∏ô‡πÜ)</h3>
      <div class="sub">
        - ‡∏ï‡∏≠‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á<br/>
        - ‡∏ï‡∏≠‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô<br/>
        - ‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï<br/>
        - ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏£‡∏ö 10 ‡∏Ç‡πâ‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏Å‡∏°‡∏à‡∏ö
      </div>
    </div>
  </div>

<script>
/* ==========================
   COUNT QUEST ‚Äì UNIQUE ENGINE
   ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö "Seeded Random"
   ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå + ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥
========================== */

const $ = (id)=>document.getElementById(id);

let state = {
  started:false,
  time:60,
  life:3,
  score:0,
  level:1,
  qNo:1,
  qMax:10,
  usedSignatures:new Set(),
  timer:null,
  current:null,
  seed: Date.now() % 1000000,
  streak:0
};

// Seeded RNG (‡πÉ‡∏´‡πâ‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ï‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á/‡πÄ‡∏ß‡∏•‡∏≤)
function mulberry32(a){
  return function(){
    let t = a += 0x6D2B79F5;
    t = Math.imul(t ^ t >>> 15, t | 1);
    t ^= t + Math.imul(t ^ t >>> 7, t | 61);
    return ((t ^ t >>> 14) >>> 0) / 4294967296;
  }
}
let rand = mulberry32(state.seed);

function rInt(min,max){
  return Math.floor(rand()*(max-min+1))+min;
}
function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(rand()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}
function pick(arr){ return arr[Math.floor(rand()*arr.length)]; }

function factorial(n){
  let x=1;
  for(let i=2;i<=n;i++) x*=i;
  return x;
}
function nPr(n,r){
  if(r>n) return 0;
  return factorial(n)/factorial(n-r);
}
function nCr(n,r){
  if(r>n) return 0;
  return factorial(n)/(factorial(r)*factorial(n-r));
}

function formatNum(x){
  // ‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏ç‡πà‡∏î‡∏π‡∏á‡πà‡∏≤‡∏¢
  return x.toLocaleString("th-TH");
}

function updateHUD(){
  $("time").textContent = state.time;
  $("life").textContent = state.life;
  $("score").textContent = state.score;
  $("level").textContent = state.level;
  $("qNo").textContent = state.qNo;
  $("qMax").textContent = state.qMax;
}

function startTimer(){
  if(state.timer) clearInterval(state.timer);
  state.timer = setInterval(()=>{
    if(!state.started) return;
    state.time--;
    $("time").textContent = state.time;
    if(state.time<=0){
      state.time=0;
      endGame("‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‚è±Ô∏è");
    }
  },1000);
}

function difficulty(){
  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏•
  if(state.level<=1) return "easy";
  if(state.level<=2) return "normal";
  return "hard";
}

function signature(obj){
  // ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏Å‡∏±‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ã‡πâ‡∏≥
  return JSON.stringify(obj);
}

/* ==========================
   Question Generators
   1) ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì (AND)
   2) ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å (OR)
   3) ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏™‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (Permutation)
   4) ‡∏à‡∏±‡∏î‡∏´‡∏°‡∏π‡πà (Combination)
   5) ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô / ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô (Unique style)
========================== */

function genQuestion(){
  let tries=0;
  while(tries<60){
    tries++;

    const types = ["AND","OR","PERM","COMB","RULE"];
    const type = pick(types);

    const diff = difficulty();
    let q = null;

    if(type==="AND"){
      // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏±‡∏ß/‡πÄ‡∏°‡∏ô‡∏π: a ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å x b ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
      let a = rInt(3, diff==="easy"?6:8);
      let b = rInt(3, diff==="easy"?6:9);
      let theme = pick([
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÅ‡∏ï‡πà‡∏á‡∏™‡∏°‡∏∏‡∏î",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà"
      ]);
      const ans = a*b;
      q = {
        type:"‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì (AND)",
        text:`${theme}: ‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà 1 ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${a} ‡πÅ‡∏ö‡∏ö ‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà 2 ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${b} ‡πÅ‡∏ö‡∏ö ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äú‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‚Äù ‡∏à‡∏∞‡∏°‡∏µ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?`,
        answer: ans,
        explain:`‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì: ${a} √ó ${b} = ${ans}`
      };
    }

    if(type==="OR"){
      let a = rInt(4, diff==="easy"?8:12);
      let b = rInt(3, diff==="easy"?7:10);
      let overlap = rInt(0, Math.min(a,b, diff==="easy"?2:4));
      let theme = pick([
        "‡∏ä‡∏°‡∏£‡∏°‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
        "‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ß‡∏±‡∏ô‡∏Å‡∏µ‡∏¨‡∏≤",
        "‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå",
        "‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô",
        "‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πà‡∏ô"
      ]);
      const ans = a + b - overlap;
      q = {
        type:"‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å (OR)",
        text:`${theme}: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ ‚Äú‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‚Äù ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å A ‡∏°‡∏µ ${a} ‡πÅ‡∏ö‡∏ö ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å B ‡∏°‡∏µ ${b} ‡πÅ‡∏ö‡∏ö ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô ${overlap} ‡πÅ‡∏ö‡∏ö ‡∏£‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡πÅ‡∏ö‡∏ö?`,
        answer: ans,
        explain:`‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡∏ã‡πâ‡∏≥: ${a} + ${b} ‚àí ${overlap} = ${ans}`
      };
    }

    if(type==="PERM"){
      let n = rInt(diff==="easy"?4:5, diff==="hard"?9:7);
      let r = rInt(2, Math.min(5,n));
      let theme = pick([
        "‡∏à‡∏±‡∏î‡∏Ñ‡∏¥‡∏ß‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ",
        "‡∏à‡∏±‡∏î‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞",
        "‡∏à‡∏±‡∏î‡∏£‡∏´‡∏±‡∏™‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå",
        "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£",
        "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ß‡∏ó‡∏µ"
      ]);
      const ans = nPr(n,r);
      q = {
        type:"‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏™‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (Permutation)",
        text:`${theme}: ‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${n} ‡∏ä‡∏¥‡πâ‡∏ô ‡∏ï‡πâ‡∏≠‡∏á ‚Äú‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‚Äù ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏≤ ${r} ‡∏ä‡∏¥‡πâ‡∏ô ‡∏à‡∏∞‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?`,
        answer: ans,
        explain:`Permutation: ${n}P${r} = ${n}! / (${n}-${r})! = ${ans}`
      };
    }

    if(type==="COMB"){
      let n = rInt(diff==="easy"?5:6, diff==="hard"?11:9);
      let r = rInt(2, Math.min(5,n-1));
      let theme = pick([
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏≠‡πà‡∏≤‡∏ô",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ó‡∏≥‡∏™‡∏•‡∏±‡∏î",
        "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô‡∏´‡πâ‡∏≠‡∏á"
      ]);
      const ans = nCr(n,r);
      q = {
        type:"‡∏à‡∏±‡∏î‡∏´‡∏°‡∏π‡πà (Combination)",
        text:`${theme}: ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${n} ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏ï‡πâ‡∏≠‡∏á ‚Äú‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏•‡∏≥‡∏î‡∏±‡∏ö‚Äù ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${r} ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?`,
        answer: ans,
        explain:`Combination: ${n}C${r} = ${n}! / (${r}!(${n}-${r})!) = ${ans}`
      };
    }

    if(type==="RULE"){
      // ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏û‡∏¥‡πÄ‡∏®‡∏©: ‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô / ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô
      // ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏•‡πá‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÅ‡∏ï‡πà‡∏î‡∏π "‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÉ‡∏Ñ‡∏£"
      let n = rInt(5, diff==="easy"?7:9);
      let theme = pick([
        "‡∏à‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡∏´‡∏ô‡∏±‡∏á",
        "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏ô‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏´‡∏°‡∏π‡πà",
        "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ö‡∏ô‡∏ä‡∏±‡πâ‡∏ô",
        "‡∏à‡∏±‡∏î‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏¥‡∏ô‡∏û‡∏≤‡πÄ‡∏´‡∏£‡∏î",
        "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ô‡∏°‡∏∑‡∏≠"
      ]);
      let mode = pick(["no_adjacent","together"]);

      if(mode==="together"){
        // ‡πÉ‡∏´‡πâ 2 ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô: ‡∏ô! / 2
        const ans = factorial(n) / 2;
        q = {
          type:"‡∏Å‡∏é‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô)",
          text:`${theme}: ‡∏°‡∏µ‡∏Ñ‡∏ô ${n} ‡∏Ñ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ñ‡∏ß ‡πÇ‡∏î‡∏¢‡∏°‡∏µ ‚Äú‡∏Ñ‡∏π‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏ô‡∏¥‡∏ó 2 ‡∏Ñ‡∏ô‚Äù ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠ ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?`,
          answer: ans,
          explain:`‡∏°‡∏≠‡∏á‡∏Ñ‡∏π‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏Å‡πâ‡∏≠‡∏ô ‚áí ‡∏°‡∏µ ${n-1} ‡∏Å‡πâ‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ (${n-1})! ‡πÅ‡∏•‡∏∞‡πÉ‡∏ô‡∏Å‡πâ‡∏≠‡∏ô‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ 2 ‡∏ß‡∏¥‡∏ò‡∏µ ‚áí 2√ó(${n-1})! = ${ans}`
        };
      } else {
        // ‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô: ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏ó‡∏£‡∏Å (‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÅ‡∏ö‡∏ö n ‡πÑ‡∏°‡πà‡πÉ‡∏´‡∏ç‡πà)
        // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 2 ‡∏Ñ‡∏ô A,B ‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô: ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î n! - ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô
        const total = factorial(n);
        const adjacent = factorial(n-1) * 2;
        const ans = total - adjacent;
        q = {
          type:"‡∏Å‡∏é‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô)",
          text:`${theme}: ‡∏°‡∏µ‡∏Ñ‡∏ô ${n} ‡∏Ñ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ñ‡∏ß ‡πÇ‡∏î‡∏¢‡∏°‡∏µ ‚Äú‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á 2 ‡∏Ñ‡∏ô‚Äù ‡∏´‡πâ‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?`,
          answer: ans,
          explain:`‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${n}! = ${total} ‡∏ß‡∏¥‡∏ò‡∏µ\n‡∏Å‡∏£‡∏ì‡∏µ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô: ‡∏°‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏Å‡πâ‡∏≠‡∏ô ‚áí (${n-1})! ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏•‡∏±‡∏ö‡πÉ‡∏ô‡∏Å‡πâ‡∏≠‡∏ô‡πÑ‡∏î‡πâ 2 ‚áí 2√ó(${n-1})! = ${adjacent}\n‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô = ${total} ‚àí ${adjacent} = ${ans}`
        };
      }
    }

    if(!q) continue;

    // ‡∏Å‡∏±‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ã‡πâ‡∏≥
    const sig = signature({t:q.type, text:q.text, ans:q.answer});
    if(state.usedSignatures.has(sig)) continue;
    state.usedSignatures.add(sig);

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡πâ‡∏≠‡∏¢‡∏™‡πå
    const correct = q.answer;
    const wrongs = new Set();
    while(wrongs.size<3){
      let w;
      // ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏´‡∏•‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á
      const bump = rInt(1,4);
      const factor = pick([0.5, 0.75, 1.25, 1.5, 2]);
      w = Math.round(correct*factor + (rand()<0.5? bump : -bump));
      if(w<0) w = correct + rInt(2,9);
      if(w===correct) continue;
      wrongs.add(w);
    }
    const choices = shuffle([correct, ...Array.from(wrongs)]);

    return {
      ...q,
      choices
    };
  }

  // fallback
  return {
    type:"‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì (AND)",
    text:"‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 4 ‡πÅ‡∏ö‡∏ö ‡πÅ‡∏•‡∏∞‡∏≠‡∏µ‡∏Å‡∏ä‡∏∏‡∏î 5 ‡πÅ‡∏ö‡∏ö ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?",
    answer: 20,
    explain:"4 √ó 5 = 20",
    choices: shuffle([20, 9, 18, 24])
  };
}

function renderQuestion(){
  state.current = genQuestion();
  $("qType").textContent = state.current.type;
  $("questionText").textContent = state.current.text;
  $("feedback").textContent = "";
  $("hint").textContent = "";

  const box = $("choices");
  box.innerHTML = "";

  state.current.choices.forEach((val, idx)=>{
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.textContent = `${String.fromCharCode(65+idx)}. ${formatNum(val)}`;
    btn.onclick = ()=>checkAnswer(val, btn);
    box.appendChild(btn);
  });

  updateHUD();
}

function checkAnswer(selected, btn){
  const correct = state.current.answer;
  const all = document.querySelectorAll(".choice");
  all.forEach(b=>b.disabled=true);

  if(selected === correct){
    btn.classList.add("correct");
    state.streak++;

    // ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏ñ‡∏π‡∏Å + ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ + streak
    const timeBonus = Math.max(0, Math.floor(state.time/10));
    const streakBonus = Math.min(10, state.streak);
    const gain = 10 + timeBonus + streakBonus;

    state.score += gain;

    $("feedback").textContent = `‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! +${gain} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
    $("hint").textContent = `‡πÄ‡∏â‡∏•‡∏¢: ${state.current.explain}`;

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡∏ó‡∏∏‡∏Å 3 ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏¥‡∏î
    if(state.streak % 3 === 0) state.level++;

  }else{
    btn.classList.add("wrong");
    state.life--;
    state.streak = 0;

    // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å
    all.forEach(b=>{
      const num = Number(b.textContent.replace(/[^\d]/g,""));
      // ‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏Ç format
      const raw = b.textContent.split(". ")[1].replace(/,/g,"");
      if(Number(raw) === correct) b.classList.add("correct");
    });

    $("feedback").textContent = `‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å! ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠ ${formatNum(correct)} (‡πÄ‡∏™‡∏µ‡∏¢ 1 ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï)`;
    $("hint").textContent = `‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î: ${state.current.explain}`;
  }

  updateHUD();

  setTimeout(()=>{
    if(state.life<=0){
      endGame("‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏´‡∏°‡∏î ‚ù§Ô∏è");
      return;
    }
    state.qNo++;
    if(state.qNo>state.qMax){
      endGame("‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß üéØ");
      return;
    }
    renderQuestion();
  }, 1200);
}

function startGame(){
  state.started = true;
  state.time = 60;
  state.life = 3;
  state.score = 0;
  state.level = 1;
  state.qNo = 1;
  state.qMax = 10;
  state.usedSignatures = new Set();
  state.streak = 0;

  $("gameCard").style.display = "block";
  $("endCard").style.display = "none";

  updateHUD();
  startTimer();
  renderQuestion();
}

function resetGame(){
  state.started = false;
  if(state.timer) clearInterval(state.timer);
  $("gameCard").style.display = "none";
  $("endCard").style.display = "none";
  state.time = 60;
  state.life = 3;
  state.score = 0;
  state.level = 1;
  state.qNo = 1;
  state.qMax = 10;
  updateHUD();
}

function endGame(reason){
  state.started = false;
  if(state.timer) clearInterval(state.timer);

  $("gameCard").style.display = "none";
  $("endCard").style.display = "block";

  const rank = state.score>=160 ? "üëë ‡∏ô‡∏±‡∏Å‡∏ô‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô"
            : state.score>=110 ? "üî• ‡∏ô‡∏±‡∏Å‡∏ô‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡πÇ‡∏õ‡∏£"
            : state.score>=70  ? "‚ú® ‡∏ô‡∏±‡∏Å‡∏ô‡∏±‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î"
            : "üå± ‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏´‡∏±‡∏î‡∏ô‡∏±‡∏ö";

  $("summary").innerHTML = `
    ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏à‡∏ö‡πÄ‡∏Å‡∏°: <b>${reason}</b><br/>
    ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: <b>${state.score}</b><br/>
    ‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: <b>${state.level}</b><br/>
    ‡∏â‡∏≤‡∏¢‡∏≤: <b>${rank}</b><br/><br/>
    <span class="small">Seed ‡πÄ‡∏Å‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <b>${state.seed}</b> (‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ ‚Äú‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÉ‡∏Ñ‡∏£‚Äù)</span>
  `;
}

$("startBtn").onclick = startGame;
$("resetBtn").onclick = resetGame;
$("playAgainBtn").onclick = ()=>{
  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô seed ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥
  state.seed = (Date.now() + Math.floor(Math.random()*99999)) % 1000000;
  rand = mulberry32(state.seed);
  startGame();
};

$("shareBtn").onclick = async ()=>{
  const msg = `‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏ô COUNT QUEST ‚Äì ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ô‡∏±‡∏Å‡∏ô‡∏±‡∏ö‡∏Å‡∏±‡∏ô! üé≤‚ú®
‡πÄ‡∏Å‡∏°‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö (‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå+‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)
‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏ó‡∏≥‡πÑ‡∏î‡πâ: ${state.score}
(‡∏ñ‡πâ‡∏≤‡∏≠‡∏±‡∏õ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏™‡πà‡∏•‡∏¥‡πâ‡∏á‡∏Å‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ)`;

  try{
    await navigator.clipboard.writeText(msg);
    alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ä‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
  }catch(e){
    alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ https) ‡∏•‡∏≠‡∏á‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏ó‡∏ô");
  }
};

updateHUD();
</script>
</body>
</html>
